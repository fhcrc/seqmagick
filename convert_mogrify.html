
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>convert and mogrify &#8212; seqmagick 0.8.4+dirty documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="backtrans-align" href="backtrans_align.html" />
    <link rel="prev" title="Changes for seqmagick" href="changelog.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="backtrans_align.html" title="backtrans-align"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changes for seqmagick"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">seqmagick 0.8.4+dirty documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="docutils literal notranslate"><span class="pre">convert</span></code> and <code class="docutils literal notranslate"><span class="pre">mogrify</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="convert-and-mogrify">
<h1><code class="docutils literal notranslate"><span class="pre">convert</span></code> and <code class="docutils literal notranslate"><span class="pre">mogrify</span></code><a class="headerlink" href="#convert-and-mogrify" title="Permalink to this heading">¶</a></h1>
<p>Convert and mogrify achieve similar goals. <code class="docutils literal notranslate"><span class="pre">convert</span></code> performs some operation
on a file (from changing format to something more complicated) and writes to a
new file. <code class="docutils literal notranslate"><span class="pre">mogrify</span></code> modifies a file in place, and would not normally be used
to convert formats.</p>
<p>The two have similar signatures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">convert</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">infile</span> <span class="n">outfile</span>
</pre></div>
</div>
<p>vs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">mogrify</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">infile</span>
</pre></div>
</div>
<p>Options are shared between convert and mogrify.</p>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<section id="basic-conversion">
<h3>Basic Conversion<a class="headerlink" href="#basic-conversion" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">convert</span></code> can be used to convert between any file types BioPython supports
(which is many). For a full list of supported types, see the <a class="reference external" href="http://www.biopython.org/wiki/SeqIO#File_Formats">BioPython SeqIO
wiki page</a>.</p>
<p>By default, file type is inferred from file extension, so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">convert</span> <span class="n">a</span><span class="o">.</span><span class="n">fasta</span> <span class="n">a</span><span class="o">.</span><span class="n">sto</span>
</pre></div>
</div>
<p>converts an existing file <code class="docutils literal notranslate"><span class="pre">a.fasta</span></code> from FASTA to Stockholm format. <strong>Neat!</strong>
But there’s more.</p>
</section>
<section id="sequence-modification">
<h3>Sequence Modification<a class="headerlink" href="#sequence-modification" title="Permalink to this heading">¶</a></h3>
<p>A wealth of options await you when you’re ready to do something slightly more
complicated with your sequences.</p>
<p>Let’s say I just want a few of my sequences:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ seqmagick convert --head 5 examples/test.fasta examples/test.head.fasta
$ seqmagick info examples/test*.fasta
name                      alignment  min_len  max_len  avg_len  num_seqs
examples/test.fasta       FALSE      972      9719     1573.67  15
examples/test.head.fasta  FALSE      978      990      984.00   5
</pre></div>
</div>
<p>Or I want to remove any gaps, reverse complement, select the last 5 sequences,
and remove any duplicates from an alignment in place:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">mogrify</span> <span class="o">--</span><span class="n">tail</span> <span class="mi">5</span> <span class="o">--</span><span class="n">reverse</span><span class="o">-</span><span class="n">complement</span> <span class="o">--</span><span class="n">ungap</span> <span class="o">--</span><span class="n">deduplicate</span><span class="o">-</span><span class="n">sequences</span> <span class="n">examples</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">fasta</span>
</pre></div>
</div>
<p>You can even define your own functions in python and use them via
<code class="docutils literal notranslate"><span class="pre">--apply-function</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To maximize flexibility, most transformations passed as options to
<code class="docutils literal notranslate"><span class="pre">mogrify</span></code> and <code class="docutils literal notranslate"><span class="pre">convert</span></code> are processed <em>in order</em>, so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">convert</span> <span class="o">--</span><span class="nb">min</span><span class="o">-</span><span class="n">length</span> <span class="mi">50</span> <span class="o">--</span><span class="n">cut</span> <span class="mi">1</span><span class="p">:</span><span class="mi">5</span> <span class="n">a</span><span class="o">.</span><span class="n">fasta</span> <span class="n">b</span><span class="o">.</span><span class="n">fasta</span>
</pre></div>
</div>
<p>will work fine, but:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seqmagick</span> <span class="n">convert</span> <span class="o">--</span><span class="n">cut</span> <span class="mi">1</span><span class="p">:</span><span class="mi">5</span> <span class="o">--</span><span class="nb">min</span><span class="o">-</span><span class="n">length</span> <span class="mi">50</span> <span class="n">a</span><span class="o">.</span><span class="n">fasta</span> <span class="n">b</span><span class="o">.</span><span class="n">fasta</span>
</pre></div>
</div>
<p>will never return records, since the cutting transformation happens before
the minimum length predicate is applied.</p>
</div>
<section id="command-line-arguments">
<h4>Command-line Arguments<a class="headerlink" href="#command-line-arguments" title="Permalink to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>usage: seqmagick convert [-h] [--line-wrap N]
                         [--sort {length-asc,length-desc,name-asc,name-desc}]
                         [--apply-function /path/to/module.py:function_name[:parameter]]
                         [--cut start:end[,start2:end2]] [--relative-to ID]
                         [--drop start:end[,start2:end2]] [--dash-gap]
                         [--lower] [--mask start1:end1[,start2:end2]]
                         [--reverse] [--reverse-complement] [--squeeze]
                         [--squeeze-threshold PROP]
                         [--transcribe {dna2rna,rna2dna}]
                         [--translate {dna2protein,rna2protein,dna2proteinstop,rna2proteinstop}]
                         [--ungap] [--upper] [--deduplicate-sequences]
                         [--deduplicated-sequences-file FILE]
                         [--deduplicate-taxa] [--exclude-from-file FILE]
                         [--include-from-file FILE] [--head N]
                         [--max-length N] [--min-length N]
                         [--min-ungapped-length N] [--pattern-include REGEX]
                         [--pattern-exclude REGEX] [--prune-empty]
                         [--sample N] [--sample-seed N]
                         [--seq-pattern-include REGEX]
                         [--seq-pattern-exclude REGEX] [--tail N]
                         [--first-name] [--name-suffix SUFFIX]
                         [--name-prefix PREFIX]
                         [--pattern-replace search_pattern replace_pattern]
                         [--strip-range] [--input-format FORMAT]
                         [--output-format FORMAT]
                         [--alphabet {dna,dna-ambiguous,rna,rna-ambiguous,protein}]
                         source_file dest_file

Convert between sequence formats

positional arguments:
  source_file           Input sequence file
  dest_file             Output file

options:
  -h, --help            show this help message and exit
  --alphabet {dna,dna-ambiguous,rna,rna-ambiguous,protein}
                        Input alphabet. Required for writing NEXUS.

Sequence File Modification:
  --line-wrap N         Adjust line wrap for sequence strings. When N is 0,
                        all line breaks are removed. Only fasta files are
                        supported for the output format.
  --sort {length-asc,length-desc,name-asc,name-desc}
                        Perform sorting by length or name, ascending or
                        descending. ASCII sorting is performed for names

Sequence Modificaton:
  --apply-function /path/to/module.py:function_name[:parameter]
                        Specify a custom function to apply to the input
                        sequences, specified as
                        /path/to/file.py:function_name. Function should accept
                        an iterable of Bio.SeqRecord objects, and yield
                        SeqRecords. If the parameter is specified, it will be
                        passed as a string as the second argument to the
                        function. Specify more than one to chain.
  --cut start:end[,start2:end2]
                        Keep only the residues within the 1-indexed start and
                        end positions specified, : separated. Includes last
                        item. Start or end can be left unspecified to indicate
                        start/end of sequence. A negative start may be
                        provided to indicate an offset from the end of the
                        sequence. Note that to prevent negative numbers being
                        interpreted as flags, this should be written with an
                        equals sign between `--cut` and the argument, e.g.:
                        `--cut=-10:`
  --relative-to ID      Apply --cut relative to the indexes of non-gap
                        residues in sequence identified by ID
  --drop start:end[,start2:end2]
                        Remove the residues at the specified indices. Same
                        format as `--cut`.
  --dash-gap            Replace any of the characters &quot;?.:~&quot; with a &quot;-&quot; for
                        all sequences
  --lower               Translate the sequences to lower case
  --mask start1:end1[,start2:end2]
                        Replace residues in 1-indexed slice with gap-
                        characters. If --relative-to is also specified,
                        coordinates are relative to the sequence ID provided.
  --reverse             Reverse the order of sites in sequences
  --reverse-complement  Convert sequences into reverse complements
  --squeeze             Remove any gaps that are present in the same position
                        across all sequences in an alignment (equivalent to
                        --squeeze-threshold=1.0)
  --squeeze-threshold PROP
                        Trim columns from an alignment which have gaps in
                        least the specified proportion of sequences.
  --transcribe {dna2rna,rna2dna}
                        Transcription and back transcription for generic DNA
                        and RNA. Source sequences must be the correct alphabet
                        or this action will likely produce incorrect results.
  --translate {dna2protein,rna2protein,dna2proteinstop,rna2proteinstop}
                        Translate from generic DNA/RNA to proteins. Options
                        with &quot;stop&quot; suffix will NOT translate through stop
                        codons . Source sequences must be the correct alphabet
                        or this action will likely produce incorrect results.
  --ungap               Remove gaps in the sequence alignment
  --upper               Translate the sequences to upper case

Record Selection:
  --deduplicate-sequences
                        Remove any duplicate sequences by sequence content,
                        keep the first instance seen
  --deduplicated-sequences-file FILE
                        Write all of the deduplicated sequences to a file
  --deduplicate-taxa    Remove any duplicate sequences by ID, keep the first
                        instance seen
  --exclude-from-file FILE
                        Filter sequences, removing those sequence IDs in the
                        specified file
  --include-from-file FILE
                        Filter sequences, keeping only those sequence IDs in
                        the specified file
  --head N              Trim down to top N sequences. With the leading `-&#39;,
                        print all but the last N sequences.
  --max-length N        Discard any sequences beyond the specified maximum
                        length. This operation occurs *before* all length-
                        changing options such as cut and squeeze.
  --min-length N        Discard any sequences less than the specified minimum
                        length. This operation occurs *before* cut and
                        squeeze.
  --min-ungapped-length N
                        Discard any sequences less than the specified minimum
                        length, excluding gaps. This operation occurs *before*
                        cut and squeeze.
  --pattern-include REGEX
                        Filter the sequences by regular expression in ID or
                        description
  --pattern-exclude REGEX
                        Filter the sequences by regular expression in ID or
                        description
  --prune-empty         Prune sequences containing only gaps (&#39;-&#39;)
  --sample N            Select a random sampling of sequences
  --sample-seed N       Set random seed for sampling of sequences
  --seq-pattern-include REGEX
                        Filter the sequences by regular expression in sequence
  --seq-pattern-exclude REGEX
                        Filter the sequences by regular expression in sequence
  --tail N              Trim down to bottom N sequences. Use +N to output
                        sequences starting with the Nth.

Sequence ID Modification:
  --first-name          Take only the first whitespace-delimited word as the
                        name of the sequence
  --name-suffix SUFFIX  Append a suffix to all IDs.
  --name-prefix PREFIX  Insert a prefix for all IDs.
  --pattern-replace search_pattern replace_pattern
                        Replace regex pattern &quot;search_pattern&quot; with
                        &quot;replace_pattern&quot; in sequence ID and description
  --strip-range         Strip ranges from sequences IDs, matching &lt;/x-y&gt;

Format Options:
  --input-format FORMAT
                        Input file format (default: determine from extension)
  --output-format FORMAT
                        Output file format (default: determine from extension)

Filters using regular expressions are case-sensitive by default. Append &quot;(?i)&quot;
to a pattern to make it case-insensitive.
</pre></div>
</div>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/seqmagick_logo_small.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">convert</span></code> and <code class="docutils literal notranslate"><span class="pre">mogrify</span></code></a><ul>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#basic-conversion">Basic Conversion</a></li>
<li><a class="reference internal" href="#sequence-modification">Sequence Modification</a><ul>
<li><a class="reference internal" href="#command-line-arguments">Command-line Arguments</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="changelog.html"
                          title="previous chapter">Changes for seqmagick</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="backtrans_align.html"
                          title="next chapter"><code class="docutils literal notranslate"><span class="pre">backtrans-align</span></code></a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/convert_mogrify.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="backtrans_align.html" title="backtrans-align"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changes for seqmagick"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">seqmagick 0.8.4+dirty documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="docutils literal notranslate"><span class="pre">convert</span></code> and <code class="docutils literal notranslate"><span class="pre">mogrify</span></code></a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2023, The Matsen Group.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
    </div>
  </body>
</html>